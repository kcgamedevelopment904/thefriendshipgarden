<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Friendship Garden</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap');
        
        body {
            font-family: 'Quicksand', sans-serif;
            background: #f0fdf4;
            overflow: hidden;
            touch-action: manipulation;
        }

        .garden-bg {
            background-color: #a3e635;
            background-image: radial-gradient(#bef264 2px, transparent 2px);
            background-size: 30px 30px;
        }

        .garden-plot {
            background: #65a30d;
            border-radius: 50% / 20%;
            box-shadow: inset 0 -10px 30px rgba(0,0,0,0.2), 0 10px 20px rgba(0,0,0,0.1);
            border: 4px solid #4d7c0f;
        }

        .flower {
            transition: all 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .heart-particle {
            position: absolute;
            pointer-events: none;
            animation: floatUp 1.5s ease-out forwards;
        }

        @keyframes floatUp {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-120px) scale(1.5); opacity: 0; }
        }

        .hidden { display: none; }
        
        .btn-hover {
            transition: all 0.3s ease;
        }
        .btn-hover:active { transform: scale(0.95); }

        .progress-dot {
            transition: all 0.3s ease;
        }

        /* Decorative cloud animation */
        .cloud {
            position: absolute;
            opacity: 0.6;
            animation: drift 20s linear infinite;
        }
        @keyframes drift {
            from { transform: translateX(-150px); }
            to { transform: translateX(calc(100vw + 150px)); }
        }
    </style>
</head>
<body class="flex flex-col h-screen garden-bg">

    <!-- Decorative Clouds -->
    <div class="cloud top-10" style="animation-delay: -2s;"><svg width="100" height="40" viewBox="0 0 100 40" fill="white"><path d="M10 30 Q10 10 30 15 Q40 5 60 10 Q70 0 85 15 Q100 20 90 35 L10 35 Z"/></svg></div>
    <div class="cloud top-32" style="animation-delay: -10s;"><svg width="120" height="50" viewBox="0 0 100 40" fill="white"><path d="M10 30 Q10 10 30 15 Q40 5 60 10 Q70 0 85 15 Q100 20 90 35 L10 35 Z"/></svg></div>

    <!-- Home Screen -->
    <div id="home-screen" class="fixed inset-0 z-50 bg-[#fdf2f8] flex flex-col items-center justify-center p-6 text-center">
        <!-- Decoration Picture -->
        <div class="mb-4">
            <svg width="200" height="150" viewBox="0 0 200 150">
                <circle cx="100" cy="100" r="40" fill="#fbcfe8" />
                <path d="M100 60 L100 140" stroke="#4d7c0f" stroke-width="6" />
                <path d="M100 90 Q120 80 130 100" fill="none" stroke="#4d7c0f" stroke-width="4" />
                <g class="animate-bounce" style="animation-duration: 3s">
                   <path d="M100 60 C80 20 120 20 100 60" fill="#ec4899" />
                   <path d="M100 60 C60 40 60 80 100 60" fill="#f472b6" />
                   <path d="M100 60 C140 40 140 80 100 60" fill="#f472b6" />
                   <circle cx="100" cy="60" r="8" fill="#fcd34d" />
                </g>
            </svg>
        </div>
        <h1 class="text-4xl font-black text-pink-600 mb-2 italic tracking-tight">The Friendship Garden</h1>
        <p class="text-gray-600 mb-10 max-w-xs leading-relaxed font-medium">
            Nurture your garden by answering 8 challenges about friendship and respect.
        </p>
        <button onclick="startGame()" class="btn-hover w-full max-w-xs py-5 bg-pink-500 text-white text-xl font-bold rounded-3xl shadow-xl hover:bg-pink-600">
            START GAME
        </button>
    </div>

    <!-- HUD -->
    <header id="game-hud" class="p-4 flex justify-between items-center bg-white/90 backdrop-blur-md border-b border-pink-100 z-10 hidden">
        <div class="flex flex-col">
            <h1 class="text-sm font-bold text-pink-600">The Friendship Garden</h1>
            <div id="progress-container" class="flex gap-1 mt-1">
                <!-- Progress dots -->
            </div>
        </div>
        <div class="text-right">
            <div class="text-[10px] font-bold text-pink-400 uppercase tracking-widest">Kindness Points</div>
            <div class="text-xl font-black text-pink-600" id="points-val">0</div>
        </div>
    </header>

    <!-- Main Game Area -->
    <main id="game-main" class="relative flex-grow overflow-hidden flex flex-col hidden">
        <!-- Garden View -->
        <div class="relative h-[40%] flex items-center justify-center p-4">
            <!-- Background Trees -->
            <div class="absolute bottom-0 w-full flex justify-around opacity-40 pointer-events-none px-10">
                <svg width="40" height="60" viewBox="0 0 40 60"><path d="M20 10 L35 50 L5 50 Z" fill="#365314"/><rect x="18" y="50" width="4" height="10" fill="#422006"/></svg>
                <svg width="50" height="80" viewBox="0 0 50 80"><path d="M25 10 L45 70 L5 70 Z" fill="#3f6212"/><rect x="23" y="70" width="4" height="10" fill="#422006"/></svg>
                <svg width="40" height="60" viewBox="0 0 40 60"><path d="M20 10 L35 50 L5 50 Z" fill="#365314"/><rect x="18" y="50" width="4" height="10" fill="#422006"/></svg>
            </div>
            
            <div class="garden-plot w-full max-w-lg aspect-video relative flex items-center justify-center z-10">
                <div id="flowers-grid" class="absolute inset-0 grid grid-cols-4 grid-rows-2 p-6 gap-2"></div>
            </div>
        </div>

        <!-- Quiz Panel -->
        <div class="h-[60%] bg-white rounded-t-[3rem] shadow-2xl border-t border-pink-50 p-6 flex flex-col z-20">
            <!-- Decorative Border Image -->
            <div class="w-full flex justify-center mb-2 -mt-2 opacity-30">
                <svg width="200" height="20" viewBox="0 0 200 20" fill="#f9a8d4">
                    <circle cx="20" cy="10" r="5"/><circle cx="60" cy="10" r="5"/><circle cx="100" cy="10" r="5"/><circle cx="140" cy="10" r="5"/><circle cx="180" cy="10" r="5"/>
                </svg>
            </div>

            <div id="quiz-container" class="flex-grow flex flex-col">
                <div class="flex items-center justify-between mb-2">
                    <span id="quiz-cat" class="bg-blue-100 text-blue-600 text-[10px] px-3 py-1 rounded-full font-bold tracking-widest uppercase">CATEGORY</span>
                    <span id="quiz-num" class="text-gray-400 text-xs font-bold font-mono">Q 1/8</span>
                </div>
                
                <h2 id="quiz-question" class="text-lg font-bold text-gray-800 mb-6 leading-snug"></h2>
                
                <div id="quiz-options" class="grid grid-cols-1 gap-3 overflow-y-auto pr-1">
                    <!-- Options -->
                </div>
            </div>
        </div>
    </main>

    <!-- Feedback Modal -->
    <div id="feedback-modal" class="fixed inset-0 bg-black/70 z-[60] flex items-center justify-center p-6 hidden">
        <div class="bg-white rounded-[2.5rem] p-8 max-w-sm w-full text-center shadow-2xl relative overflow-hidden">
            <!-- Modal Background Decoration -->
            <div class="absolute -top-10 -right-10 w-32 h-32 bg-pink-100 rounded-full opacity-50"></div>
            <div class="absolute -bottom-10 -left-10 w-32 h-32 bg-green-100 rounded-full opacity-50"></div>
            
            <div id="feedback-emoji" class="text-7xl mb-4 relative z-10">âœ¨</div>
            <h2 id="feedback-title" class="text-2xl font-black text-gray-800 mb-2 relative z-10"></h2>
            <div id="feedback-msg" class="text-gray-600 mb-8 bg-white/80 p-4 rounded-2xl text-sm leading-relaxed border border-pink-100 relative z-10"></div>
            <button id="next-btn" onclick="closeFeedback()" class="w-full py-4 bg-pink-500 text-white font-bold rounded-2xl shadow-xl hover:bg-pink-600 relative z-10">
                NEXT CHALLENGE
            </button>
        </div>
    </div>

    <!-- Final Result -->
    <div id="end-screen" class="fixed inset-0 z-[70] bg-[#f0fdf4] flex flex-col items-center justify-center p-6 text-center hidden">
        <!-- Trophy Picture -->
        <div class="mb-4">
            <svg width="120" height="120" viewBox="0 0 100 100">
                <path d="M30 30 L70 30 L70 50 Q70 70 50 70 Q30 70 30 50 Z" fill="#fbbf24" stroke="#d97706" stroke-width="3"/>
                <path d="M50 70 L50 85 M35 85 L65 85" fill="none" stroke="#d97706" stroke-width="4"/>
                <path d="M30 35 Q15 35 15 45 Q15 55 30 55" fill="none" stroke="#d97706" stroke-width="3"/>
                <path d="M70 35 Q85 35 85 45 Q85 55 70 55" fill="none" stroke="#d97706" stroke-width="3"/>
            </svg>
        </div>
        <h2 class="text-4xl font-black text-green-600 mb-4 tracking-tight">Garden in Bloom!</h2>
        <p class="text-gray-600 mb-8 max-w-xs font-medium">
            You completed all challenges! Your garden is now a safe and happy place.
        </p>
        <div class="bg-white p-6 rounded-3xl shadow-lg mb-8 w-full max-w-xs border-b-4 border-green-200">
            <p class="text-gray-400 text-xs uppercase font-bold mb-1">Final Kindness Score</p>
            <p id="final-points" class="text-5xl font-black text-green-500">0</p>
        </div>
        <button onclick="location.reload()" class="w-full max-w-xs py-5 bg-gray-900 text-white text-xl font-bold rounded-3xl">
            PLAY AGAIN
        </button>
    </div>

    <script>
        let points = 0;
        let currentQIndex = 0;
        
        const friends = [
            { name: "Loyalty", emoji: "ðŸŒ»", bond: 0 },
            { name: "Respect", emoji: "ðŸŒ¹", bond: 0 },
            { name: "Kindness", emoji: "ðŸŒ·", bond: 0 },
            { name: "Listening", emoji: "ðŸŒ¼", bond: 0 },
            { name: "Safety", emoji: "ðŸŒµ", bond: 0 },
            { name: "Honesty", emoji: "ðŸŒ±", bond: 0 },
            { name: "Helpful", emoji: "ðŸª»", bond: 0 },
            { name: "Support", emoji: "ðŸ’Ž", bond: 0 }
        ];

        const quizQuestions = [
            {
                q: "A good friend always listens and understands you. They are a...?",
                options: ["Loud speaker", "Good listener", "Distracted person", "Fast runner"],
                correct: 1,
                fact: "A good listener shows they care about your feelings!",
                cat: "Qualities of a Friend"
            },
            {
                q: "What type of bullying involves pushing, kicking, or hitting?",
                options: ["Verbal Bullying", "Social Bullying", "Physical Bullying", "Cyber Bullying"],
                correct: 2,
                fact: "Physical bullying is using your body to hurt someone else.",
                cat: "Types of Bullying"
            },
            {
                q: "Excluding someone from a group or spreading rumors is called...?",
                options: ["Social Bullying", "Physical Bullying", "Being a leader", "Verbal Bullying"],
                correct: 0,
                fact: "Social bullying hurts someone's reputation or relationships.",
                cat: "Types of Bullying"
            },
            {
                q: "What is it called when someone uses hurtful words or name-calling?",
                options: ["Physical Bullying", "Verbal Bullying", "Giving advice", "Friendship"],
                correct: 1,
                fact: "Verbal bullying is using words to tease or insult others.",
                cat: "Types of Bullying"
            },
            {
                q: "A loyal friend is someone who...?",
                options: ["Leaves when you are sad", "Sticks by your side and supports you", "Only plays when they win", "Tells your secrets to everyone"],
                correct: 1,
                fact: "Loyalty means being faithful and supportive to your friends.",
                cat: "Qualities of a Friend"
            },
            {
                q: "Using the internet or cell phones to be mean to others is called...?",
                options: ["Digital Play", "Cyber Bullying", "Social Networking", "Verbal Bullying"],
                correct: 1,
                fact: "Cyber bullying happens through technology and can be very hurtful.",
                cat: "Types of Bullying"
            },
            {
                q: "How should you treat others' feelings and belongings?",
                options: ["With disrespect", "With respect and care", "By ignoring them", "By taking them"],
                correct: 1,
                fact: "Respect means treating others the way you want to be treated.",
                cat: "Friendship Values"
            },
            {
                q: "What is the BEST thing to do if you see bullying happening?",
                options: ["Join the bully", "Watch and stay quiet", "Get help from a teacher or adult", "Record it and laugh"],
                correct: 2,
                fact: "Reporting bullying helps keep the garden and school safe for everyone!",
                cat: "Taking Action"
            }
        ];

        function startGame() {
            document.getElementById('home-screen').classList.add('hidden');
            document.getElementById('game-hud').classList.remove('hidden');
            document.getElementById('game-main').classList.remove('hidden');
            initGarden();
            initProgress();
            loadQuestion();
        }

        function initProgress() {
            const container = document.getElementById('progress-container');
            container.innerHTML = '';
            for (let i = 0; i < 8; i++) {
                const dot = document.createElement('div');
                dot.className = "w-2.5 h-1.5 rounded-full bg-pink-100 progress-dot";
                dot.id = `dot-${i}`;
                container.appendChild(dot);
            }
        }

        function initGarden() {
            const grid = document.getElementById('flowers-grid');
            grid.innerHTML = '';
            friends.forEach((friend, index) => {
                const div = document.createElement('div');
                div.className = `flower flex flex-col items-center justify-center opacity-20`;
                div.id = `friend-${index}`;
                updateFriendUI(index, div);
                grid.appendChild(div);
            });
        }

        function updateFriendUI(index, element = null) {
            const friend = friends[index];
            const div = element || document.getElementById(`friend-${index}`);
            const scale = 0.5 + (friend.bond / 100);
            
            div.innerHTML = `
                <div class="text-4xl md:text-5xl mb-1 filter drop-shadow-md transition-all duration-1000" style="transform: scale(${scale})">${friend.emoji}</div>
                <div class="text-[8px] font-bold text-white drop-shadow-md tracking-tighter uppercase">${friend.name}</div>
            `;
            if (friend.bond > 0) div.classList.remove('opacity-20');
        }

        function loadQuestion() {
            const q = quizQuestions[currentQIndex];
            document.getElementById('quiz-num').innerText = `Q ${currentQIndex + 1}/8`;
            document.getElementById('quiz-cat').innerText = q.cat;
            document.getElementById('quiz-question').innerText = q.q;
            
            const optionsBox = document.getElementById('quiz-options');
            optionsBox.innerHTML = '';
            q.options.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = "btn-hover w-full text-left p-4 rounded-2xl border-2 border-pink-50 bg-white hover:border-pink-300 hover:bg-pink-50 text-sm font-bold text-gray-700 shadow-sm";
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(i, q);
                optionsBox.appendChild(btn);
            });
            
            document.getElementById(`dot-${currentQIndex}`).classList.add('bg-pink-400', 'w-6');
        }

        function checkAnswer(index, questionObj) {
            const isCorrect = (index === questionObj.correct);
            const modal = document.getElementById('feedback-modal');
            const title = document.getElementById('feedback-title');
            const msg = document.getElementById('feedback-msg');
            const emoji = document.getElementById('feedback-emoji');
            
            if (isCorrect) {
                points += 125;
                title.innerText = "Great Job!";
                msg.innerText = questionObj.fact;
                emoji.innerText = "ðŸŒŸ";
                friends[currentQIndex].bond = 100;
                updateFriendUI(currentQIndex);
                createHearts();
            } else {
                title.innerText = "Keep Learning!";
                msg.innerText = "Remember: " + questionObj.fact;
                emoji.innerText = "ðŸ’¡";
                friends[currentQIndex].bond = 40; 
                updateFriendUI(currentQIndex);
            }
            
            document.getElementById('points-val').innerText = points;
            modal.classList.remove('hidden');
            
            if (currentQIndex === 7) {
                document.getElementById('next-btn').innerText = "VIEW GARDEN";
            }
        }

        function closeFeedback() {
            document.getElementById('feedback-modal').classList.add('hidden');
            if (currentQIndex < 7) {
                currentQIndex++;
                loadQuestion();
            } else {
                showEndScreen();
            }
        }

        function showEndScreen() {
            document.getElementById('end-screen').classList.remove('hidden');
            document.getElementById('final-points').innerText = points;
        }

        function createHearts() {
            for(let i=0; i<10; i++) {
                const heart = document.createElement('div');
                heart.innerHTML = ['â¤ï¸','âœ¨','ðŸŒ¸'][Math.floor(Math.random()*3)];
                heart.className = 'heart-particle text-3xl';
                heart.style.left = Math.random() * 80 + 10 + '%';
                heart.style.top = '50%';
                document.body.appendChild(heart);
                setTimeout(() => heart.remove(), 1500);
            }
        }
    </script>
</body>
</html>
